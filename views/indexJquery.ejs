<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BREAD(Browser,Read,Add,Delete)</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>BREAD(Browse,Read,Edit,Add,Delete)</h1>
        <h2>Filters </h2>
        <div class="container">
        </div>
        <div class="card-body">
            <form id="form-search">
                <div class="row mb-3">
                    <label for="id" class="col-sm-2 col-form-label">ID</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="id" placeholder="ID">
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="string" class="col-sm-2 col-form-label">String</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="string" placeholder="String">
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="integer" class="col-sm-2 col-form-label">Integer</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" id="integer" placeholder="Integer">
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="float" class="col-sm-2 col-form-label">Float</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" id="float" placeholder="Float">
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="date" class="col-sm-2 col-form-label">Date</label>
                    <div class="col-sm-10">
                        <input type="date" class="form-control" id="stardate" placeholder="StarDate"
                            style="width: 20%;">
                        to
                        <input type="date" class="form-control" id="enddate" placeholder="EndDate" style="width: 20%;">
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="boolean" class="col-sm-2 col-form-label">Boolean</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="boolean" placeholder="Choose the boolean...">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Search</button>
                <button type="button" class="btn btn-primary">Reset</button>
            </form>
        </div>
        <br>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>String</th>
                    <th>Integer</th>
                    <th>Float</th>
                    <th>Date</th>
                    <th>Boolean</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <div class="card-footer">

        </div>
    </div>
    </div>
    <script>
        let params = {
            page: 1
        }

        $(document).ready(function () {
            loadData()

            $('#form-search').submit(function (event) {
                event.preventDefault()
                searchData()
            })
        })

        const loadData = () => {
            $.ajax({
                url: '/users',
                data: params,
                dataType: 'json'
            }).done(function (data) {
                let html = ''
                data.users.forEach((user, index) => {
                    html += `
                    <tr>
                    <td>${index + 1}</td>
                    <td>${user.string}</td>
                    <td>${user.integer}</td>
                    <td>${user.float}</td>
                    <td>${moment(user.date).format('MM-DD-YYYY')}</td>
                    <td>${user.boolean}</td>
                    <td>
                        <button class="btn btn-success" type="button">Edit</button>
                        <button class="btn btn-danger" type="button">Delete</button>
                    </td>
                </tr>
                `
                });
                $('table tbody').html(html)
            })
        }

        const searchData = () => {
            const id = $('#id').val()
            const string = $('#string').val()
            const integer = $('#integer').val()
            const float = $('#float').val()
            const stardate = $('#stardate').val()
            const enddate = $('#enddate').val()
            const boolean = $('#boolean').val()
            console.log(id, string, integer, float, stardate, enddate, boolean)
            params = { ...params, id, string, integer, float, stardate, enddate, boolean }
            loadData()
        }
    </script>
</body>

</html>